<app-header></app-header>
<div id="sign-in-wrapper" class="fade-in">
  <div class="logo-section">
    <img 
      [src]="logoPath()" 
      alt="LA GRAVISTERIE" 
      class="logo-image"
      (load)="onLogoLoad()"
      (error)="onLogoError($event)"
      *ngIf="!logoError">
    <h1 class="logo-text" *ngIf="logoError">LA GRAVISTERIE</h1>
  </div>
  <span class="title">{{title}}</span>
  <span class="sub-title">{{subTitle}}</span>
  
  <div class="success-area" *ngIf="successMessage">
    <p class="success-message">{{successMessage}}</p>
  </div>
  
  <div class="error-area error-area--general" *ngIf="getCredentialsError()">
    <p>{{ getCredentialsError() }}</p>
  </div>

  <form [formGroup]="formGroup">

    <section id="content">
      <div class="input-wrapper" [class.field-wrapper--error]="hasFieldError('username')">
        <app-floating-label-input
          [label]="'Nom d\'utilisateur'"
          [control]="get('username')"
          [formGroup]="formGroup">
        </app-floating-label-input>
        <p class="field-error" *ngIf="getFieldErrorMessage('username')">{{ getFieldErrorMessage('username') }}</p>
        <p class="input-hint" *ngIf="!getFieldErrorMessage('username')">Entre 1 et 20 caractères</p>
      </div>
      
      <div class="input-wrapper" [class.field-wrapper--error]="hasFieldError('password')">
        <app-floating-label-input
          [label]="'Mot de passe'"
          [control]="get('password')"
          [formGroup]="formGroup"
          type="password">
        </app-floating-label-input>
        <p class="field-error" *ngIf="getFieldErrorMessage('password')">{{ getFieldErrorMessage('password') }}</p>
        <p class="input-hint" *ngIf="!getFieldErrorMessage('password')">Entre 1 et 20 caractères</p>
      </div>
    </section>

    <div class="button-area">
      <button type="button" class="btn-primary" (click)="signIn()">Se connecter</button>
    </div>
  </form>
</div>
